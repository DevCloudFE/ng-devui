@import '../style/core/animation';
@import '../style/theme/color';
@import '../style/theme/corner';
@import '../style/core/font';

.devui-menu {
  --menu-width: 256px;
  --padding-size: 16px;
  --icon-gap: 10px;
  $menu-width: var(--menu-width);
  $padding-size: var(--padding-size);
  $icon-gap: var(--icon-gap);
  $transition-attrs: $devui-animation-duration-fast $devui-animation-ease-in-out-smooth;

  width: $menu-width;
  border: 1px solid $devui-dividing-line;
  transition: width $transition-attrs;

  .devui-menu-item {
    display: flex;
    align-items: center;
    column-gap: $icon-gap;
    height: 40px;
    padding-inline: $padding-size 12px;
    color: $devui-text-weak;
    cursor: pointer;
    transition: background-color $transition-attrs;

    &:not(.disabled, .active):hover {
      background-color: $devui-list-item-hover-bg;
      color: $devui-list-item-hover-text;
    }

    &:not(.disabled):active {
      background-color: $devui-list-item-selected-bg;
    }

    .devui-menu-item-icon {
      transition: transform $transition-attrs;
    }

    & > a {
      display: block;
      width: 100%;
      color: $devui-text-weak;
      text-decoration: none;

      &:hover {
        color: inherit;
      }
    }
  }

  .devui-menu-item.active {
    color: $devui-brand-active;
    background-color: $devui-list-item-active-bg;
    font-weight: bold;

    &:hover {
      background-color: $devui-list-item-hover-bg;
    }

    .devui-menu-item-icon .devui-icon-container {
      color: inherit;
    }
  }

  .devui-menu-item.disabled {
    color: $devui-disabled-text;
    cursor: not-allowed;
    user-select: none;
  }

  // sub menu
  .devui-sub-menu {
    .devui-sub-menu-item {
      justify-content: space-between;

      .devui-sub-menu-item-title {
        display: flex;
        align-items: center;
        column-gap: $icon-gap;
        width: 100%;
        max-width: 200px;
        // overflow-x: hidden;
      }

      .devui-sub-menu-item-arrow {
        height: 16px;
        transition: transform $devui-animation-duration-slow $devui-animation-ease-in-out-smooth;
      }
    }

    .devui-sub-menu-item.active {
      background-color: initial;

      &:hover {
        color: $devui-brand-active-focus;
      }
    }

    .devui-sub-menu-children {
      // padding-inline-start: $padding-size;
      .devui-menu-item {
        padding-inline-start: calc($padding-size + ($icon-gap + $padding-size) * var(--level, 1));
      }
    }
  }

  .devui-sub-menu.open > .devui-sub-menu-item {
    .devui-sub-menu-item-arrow {
      transform: rotate(-180deg);
      transform-origin: center;
    }
  }
}

.devui-menu.collapsed {
  --menu-width: 60px;

  .devui-menu-item {
    justify-content: center;

    .devui-menu-item-icon {
      transform: scale(1.2);
    }

    .devui-menu-item-icon + .devui-menu-item-name,
    .devui-sub-menu-item-arrow {
      display: none;
    }
  }

  .devui-sub-menu-item-title {
    justify-content: inherit;
  }

  .devui-sub-menu-children {
    display: none;
  }
}
